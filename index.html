<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SGDTI - Sistema de Gerenciamento do Departamento de TI</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="admin.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <script>
        // Verificar autentica√ß√£o via localStorage
        (function() {
            var userData = localStorage.getItem('sgdti_user');
            
            if (!userData) {
                window.location.href = 'login.html';
                return;
            }
            
            try {
                var user = JSON.parse(userData);
                window.currentUser = user;
                window.isAdmin = user.perfil === 'admin';
                
                document.addEventListener('DOMContentLoaded', function() {
                    var userInfo = document.getElementById('user-info');
                    if (userInfo) {
                        userInfo.textContent = user.nome;
                    }
                    
                    // Mostrar/ocultar elementos baseado no perfil
                    if (window.isAdmin) {
                        // Mostrar bot√£o de gerenciamento de usu√°rios
                        var manageBtn = document.getElementById('manage-users-btn');
                        if (manageBtn) manageBtn.style.display = 'inline-flex';
                    } else {
                        // Ocultar todos os bot√µes de CRUD para usu√°rios n√£o-admin
                        var style = document.createElement('style');
                        style.textContent = '.crud-toolbar, .crud-btn, .crud-actions, .btn-action.btn-edit, .btn-action.btn-delete { display: none !important; }';
                        document.head.appendChild(style);
                    }
                });
            } catch (e) {
                localStorage.removeItem('sgdti_user');
                window.location.href = 'login.html';
            }
        })();
    </script>
</head>
<body>
    <button class="mobile-menu-btn" id="mobileMenuBtn" aria-label="Abrir menu">
        <span>‚ò∞</span>
    </button>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar">

            <div class="logo-section">
                <div class="logo">
                    <div class="logo-icon-wrapper">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="logo-svg">
                            <rect x="2" y="3" width="20" height="14" rx="2" ry="2"/>
                            <line x1="8" y1="21" x2="16" y2="21"/>
                            <line x1="12" y1="17" x2="12" y2="21"/>
                        </svg>
                    </div>
                    <div class="logo-text">
                        <h1>SGDTI</h1>
                        <span>Sistema de Gerenciamento</span>
                    </div>
                </div>
                <button class="sidebar-toggle" id="sidebarToggle" aria-label="Expandir/Recolher menu" tabindex="0" style="margin-left:auto; background:transparent; border:none; font-size:1.5em; cursor:pointer; display:none;">
                    <span class="nav-icon">‚ò∞</span>
                </button>
            </div>

            <nav class="nav-menu">
                <button class="nav-item active" data-tab="dashboard" tabindex="0">
                    <span class="nav-icon">üìä</span>
                    <span class="nav-label">Dashboard</span>
                </button>
                <button class="nav-item" data-tab="ti" tabindex="0">
                    <span class="nav-icon">üíª</span>
                    <span class="nav-label">Equipe TI</span>
                    <span class="nav-badge" id="nav-badge-ti">0</span>
                </button>
                <button class="nav-item" data-tab="impressoras" tabindex="0">
                    <span class="nav-icon">üñ®Ô∏è</span>
                    <span class="nav-label">Impressoras</span>
                    <span class="nav-badge" id="nav-badge-impressoras">0</span>
                </button>
                <button class="nav-item" data-tab="internet" tabindex="0">
                    <span class="nav-icon">üåê</span>
                    <span class="nav-label">Internet</span>
                    <span class="nav-badge" id="nav-badge-internet">0</span>
                </button>
                <button class="nav-item" data-tab="equipamentos" tabindex="0">
                    <span class="nav-icon">üîß</span>
                    <span class="nav-label">Equipamentos</span>
                    <span class="nav-badge" id="nav-badge-equipamentos">0</span>
                </button>
                <button class="nav-item" data-tab="emails" tabindex="0">
                    <span class="nav-icon">üìß</span>
                    <span class="nav-label">Emails Corporativos</span>
                    <span class="nav-badge" id="nav-badge-emails">0</span>
                </button>
                <button class="nav-item" data-tab="vigencias" tabindex="0">
                    <span class="nav-icon">üìã</span>
                    <span class="nav-label">Vig√™ncias Internets</span>
                    <span class="nav-badge" id="nav-badge-vigencias">0</span>
                </button>
                <button class="nav-item" data-tab="viagens" tabindex="0">
                    <span class="nav-icon">‚úàÔ∏è</span>
                    <span class="nav-label">Escala de Viagens</span>
                    <span class="nav-badge" id="nav-badge-viagens">0</span>
                </button>
                <button class="nav-item" data-tab="historico-viagens" tabindex="0">
                    <span class="nav-icon">üìú</span>
                    <span class="nav-label">Hist√≥rico de Viagens</span>
                    <span class="nav-badge" id="nav-badge-historico-viagens">0</span>
                </button>
                <button class="nav-item" data-tab="checklist" tabindex="0">
                    <span class="nav-icon">‚úÖ</span>
                    <span class="nav-label">Checklist</span>
                </button>
                <button class="nav-item" data-tab="folgas" tabindex="0">
                    <span class="nav-icon">üìÖ</span>
                    <span class="nav-label">Escala de Folgas</span>
                    <span class="nav-badge" id="nav-badge-folgas">0</span>
                </button>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <header class="top-bar">
                <div class="header-actions">
                    <div class="view-mode-toggle">
                        <button class="view-btn active" data-view="cards" title="Visualiza√ß√£o em Cards">
                            <span>üì±</span>
                        </button>
                        <button class="view-btn" data-view="table" title="Visualiza√ß√£o em Tabela">
                            <span>üìã</span>
                        </button>
                    </div>
                    <div class="user-actions">
                        <a id="manage-users-btn" class="btn-header" title="Gerenciar Usu√°rios" style="display:none;" href="usuarios.html">
                            <span>üë•</span> Usu√°rios
                        </a>
                        <span id="user-info" class="user-name">Carregando...</span>
                        <button id="logout-btn" class="btn-header btn-logout" title="Sair" onclick="logout()">
                            <span>üö™</span> Sair
                        </button>
                    </div>
                </div>
            </header>

            <div class="content-area">
                <!-- Dashboard Tab -->
                <div id="dashboard" class="tab-content active">
                    <div class="page-header">
                        <h2>üìä Dashboard Geral</h2>
                        <p>Vis√£o geral do Departamento de TI</p>
                    </div>

                    <div class="stats-grid">
                        <div class="stat-card gradient-5" id="card-equipamentos" style="cursor:pointer;">
                            <div class="stat-icon">üîß</div>
                            <div class="stat-info">
                                <h3>0</h3>
                                <p>Equipamentos</p>
                            </div>
                        </div>
                        <div class="stat-card gradient-1" id="card-ti" style="cursor:pointer;">
                            <div class="stat-icon">üíª</div>
                            <div class="stat-info">
                                <h3>0</h3>
                                <p>Profissionais TI</p>
                            </div>
                        </div>
                        <div class="stat-card gradient-3" id="card-impressoras" style="cursor:pointer;">
                            <div class="stat-icon">üñ®Ô∏è</div>
                            <div class="stat-info">
                                <h3>0</h3>
                                <p>Impressoras</p>
                            </div>
                        </div>
                        <div class="stat-card gradient-4" id="card-internet" style="cursor:pointer;">
                            <div class="stat-icon">üåê</div>
                            <div class="stat-info">
                                <h3>0</h3>
                                <p>Links de Internet</p>
                            </div>
                        </div>
                        <div class="stat-card gradient-6" id="card-emails" style="cursor:pointer;">
                            <div class="stat-icon">üìß</div>
                            <div class="stat-info">
                                <h3>0</h3>
                                <p>Emails Corporativos</p>
                            </div>
                        </div>
                        <div class="stat-card gradient-2" id="card-vigencias" style="cursor:pointer;">
                            <div class="stat-icon">üìã</div>
                            <div class="stat-info">
                                <h3>0</h3>
                                <p>Vig√™ncias Internets</p>
                            </div>
                        </div>
                        <div class="stat-card" id="card-viagens" style="cursor:pointer;">
                            <div class="stat-icon">‚úàÔ∏è</div>
                            <div class="stat-info">
                                <h3>0</h3>
                                <p>Viagens Agendadas</p>
                            </div>
                        </div>
                        <div class="stat-card" id="card-folgas" style="cursor:pointer;">
                            <div class="stat-icon">üìÖ</div>
                            <div class="stat-info">
                                <h3 id="count-folgas">0</h3>
                                <p>Escala de Folgas</p>
                            </div>
                        </div>
                    </div>

                    <div class="dashboard-grid">
                        <div class="dashboard-card">
                            <h3>üó∫Ô∏è Distribui√ß√£o por Cidade</h3>
                            <div class="city-tabs">
                                <button class="city-tab active" data-source="ti">üíª Equipe TI</button>
                                <button class="city-tab" data-source="impressoras">üñ®Ô∏è Impressoras</button>
                                <button class="city-tab" data-source="internet">üåê Internet</button>
                                <button class="city-tab" data-source="equipamentos">üîß Equipamentos</button>
                            </div>
                            <div class="city-list" id="cityList"></div>
                            <p class="city-hint">üëÜ Clique em uma cidade para ver os detalhes</p>
                        </div>
                        <div class="dashboard-card">
                            <h3>üìà Status Geral</h3>
                            <div class="status-overview">
                                <div class="status-item">
                                    <span class="status-dot success"></span>
                                    <span>Impressoras Funcionando</span>
                                    <strong id="impressorasFuncionando">0</strong>
                                </div>
                                <div class="status-item">
                                    <span class="status-dot success"></span>
                                    <span>Links de Internet</span>
                                    <strong id="linksAtivos">0</strong>
                                </div>
                                <div class="status-item">
                                    <span class="status-dot info"></span>
                                    <span>Equipamentos Cadastrados</span>
                                    <strong id="equipamentosCadastrados">0</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- TI Tab -->
                <div id="ti" class="tab-content">
                    <div class="page-header">
                        <h2>üíª Equipe de TI</h2>
                        <p>Profissionais de TI do Departamento</p>
                    </div>
                    <div class="filters">
                        <select class="filter-select" id="tiCityFilter">
                            <option value="">Todas as Cidades</option>
                        </select>
                    </div>
                    <div id="tiContent" class="data-container"></div>
                </div>

                <!-- Impressoras Tab -->
                <div id="impressoras" class="tab-content">
                    <div class="page-header">
                        <h2>üñ®Ô∏è Impressoras</h2>
                        <p>Controle de impressoras do Departamento</p>
                    </div>
                    <div class="filters">
                        <select class="filter-select" id="impressoraCityFilter">
                            <option value="">Todas as Cidades</option>
                        </select>
                        <select class="filter-select" id="impressoraStatusFilter">
                            <option value="">Todos os Status</option>
                            <option value="SIM">Funcionando</option>
                            <option value="N√ÉO">Com Problema</option>
                            <option value="LOCADAS">Locadas</option>
                            <option value="PATRIMONIAIS">Patrimoniais</option>
                        </select>
                    </div>
                    <div id="impressorasContent" class="data-container"></div>
                </div>

                <!-- Internet Tab -->
                <div id="internet" class="tab-content">
                    <div class="page-header">
                        <h2>üåê Links de Internet</h2>
                        <p>Velocidades e operadoras</p>
                    </div>
                    <div class="filters">
                        <select class="filter-select" id="internetCityFilter">
                            <option value="">Todas as Cidades</option>
                        </select>
                        <select class="filter-select" id="internetOperadoraFilter">
                            <option value="">Todas as Operadoras</option>
                        </select>
                        <button class="btn-export-excel" id="btnExportInternet" onclick="exportInternetToExcel()" title="Exportar para Excel">
                            <span>üìä</span> Exportar Excel
                        </button>
                    </div>
                    <div id="internetContent" class="data-container"></div>
                </div>

                <!-- Equipamentos Tab -->
                <div id="equipamentos" class="tab-content">
                    <div class="page-header">
                        <h2>üîß Equipamentos de TI</h2>
                        <p>Ferramentas e equipamentos dispon√≠veis</p>
                    </div>
                    <div class="filters">
                        <select class="filter-select" id="equipamentoCityFilter">
                            <option value="">Todas as Cidades</option>
                        </select>
                    </div>
                    <div id="equipamentosContent" class="data-container"></div>
                </div>

                <!-- Emails Corporativos Tab -->
                <div id="emails" class="tab-content">
                    <div class="page-header">
                        <h2>üìß Emails Corporativos</h2>
                        <p>Lista de usu√°rios e emails corporativos</p>
                    </div>
                    <div class="filters">
                        <input type="text" class="filter-select" id="emailSearchFilter" placeholder="Buscar por nome, CPF ou email..." style="width: 300px;">
                        <select class="filter-select" id="emailStatusFilter">
                            <option value="">Todos os Status</option>
                            <option value="criado">Criado</option>
                            <option value="Solicitado">Solicitado</option>
                        </select>
                        <button class="btn-export-excel" id="btnExportEmails" onclick="exportEmailsToExcel()" title="Exportar para Excel">
                            <span>üì•</span> Exportar Excel
                        </button>
                    </div>
                    <div id="emailsContent" class="data-container"></div>
                </div>

                <!-- Vig√™ncias Internets Tab -->
                <div id="vigencias" class="tab-content">
                    <div class="page-header">
                        <h2>üìã Vig√™ncias Internets</h2>
                        <p>Controle de contratos e vig√™ncias de internet</p>
                    </div>
                    <div class="filters">
                        <input type="text" class="filter-select" id="vigenciasSearchFilter" placeholder="Buscar por fornecedor, cidade, setor..." style="width: 300px;">
                        <select class="filter-select" id="vigenciasCityFilter">
                            <option value="">Todas as Cidades</option>
                        </select>
                        <select class="filter-select" id="vigenciasStatusFilter">
                            <option value="">Todos os Status</option>
                            <option value="SIM">Contrato OK</option>
                            <option value="N√ÉO">Contrato com Problema</option>
                            <option value="PENDENTE">Pendente</option>
                        </select>
                        <button class="btn-export-excel" id="btnExportVigencias" onclick="exportVigenciasToExcel()" title="Exportar para Excel">
                            <span>üì•</span> Exportar Excel
                        </button>
                    </div>
                    <div class="vigencias-summary" id="vigenciasSummary"></div>
                    <div id="vigenciasContent" class="data-container"></div>
                </div>

                <!-- Viagens Tab -->
                <div id="viagens" class="tab-content">
                    <div class="page-header">
                        <h2>‚úàÔ∏è Escala de Viagens</h2>
                        <p>Controle manual de viagens e deslocamentos da equipe</p>
                    </div>
                    <div class="filters">
                        <input type="text" class="filter-select" id="viagensSearchFilter" placeholder="Buscar por respons√°vel, destino, motivo..." style="width: 300px;">
                        <select class="filter-select" id="viagensStatusFilter">
                            <option value="">Todos os Status</option>
                            <option value="AGENDADA">Agendada</option>
                            <option value="EM_ANDAMENTO">Em Andamento</option>
                            <option value="CANCELADA">Cancelada</option>
                        </select>
                        <select class="filter-select" id="viagensDestinoFilter">
                            <option value="">Todos os Destinos</option>
                        </select>
                        <button class="btn-export-excel" id="btnExportViagens" onclick="exportViagensToExcel()" title="Exportar para Excel">
                            <span>üì•</span> Exportar Excel
                        </button>
                    </div>
                    <div class="viagens-summary" id="viagensSummary"></div>
                    <div id="viagensContent" class="data-container"></div>
                </div>

                <!-- Hist√≥rico de Viagens Tab -->
                <div id="historico-viagens" class="tab-content">
                    <div class="page-header">
                        <h2>üìú Hist√≥rico de Viagens</h2>
                        <p>Viagens conclu√≠das e finalizadas</p>
                    </div>
                    <div class="filters">
                        <input type="text" class="filter-select" id="historicoViagensSearchFilter" placeholder="Buscar por respons√°vel, destino, motivo..." style="width: 300px;">
                        <select class="filter-select" id="historicoViagensDestinoFilter">
                            <option value="">Todos os Destinos</option>
                        </select>
                        <button class="btn-export-excel" id="btnExportHistoricoViagens" onclick="exportHistoricoViagensToExcel()" title="Exportar para Excel">
                            <span>üì•</span> Exportar Excel
                        </button>
                    </div>
                    <div class="viagens-summary" id="historicoViagensSummary"></div>
                    <div id="historicoViagensContent" class="data-container"></div>
                </div>

                <!-- Checklist Tab -->
                <div id="checklist" class="tab-content">
                    <div class="page-header">
                        <h2>‚úÖ Check-List</h2>
                        <p>Lista de verifica√ß√£o de equipamentos e materiais</p>
                    </div>
                    <div class="checklist-container">
                        <div class="checklist-card">
                            <div class="checklist-header">
                                <h3>üì¶ Itens para Verifica√ß√£o</h3>
                                <button class="btn-checklist-reset" onclick="resetChecklist()" title="Limpar todos os itens">
                                    <span>üîÑ</span> Resetar
                                </button>
                            </div>
                            <div class="checklist-items">
                                <label class="checklist-item">
                                    <input type="checkbox" class="checklist-checkbox" data-item="minipc">
                                    <span class="checklist-text">MINI PC 2 <small>(Conferir a caixa para verifica√ß√£o dos componentes)</small></span>
                                </label>
                                <label class="checklist-item">
                                    <input type="checkbox" class="checklist-checkbox" data-item="hdmi">
                                    <span class="checklist-text">CABO HDMI <small>(Longo e Curto)</small></span>
                                </label>
                                <label class="checklist-item">
                                    <input type="checkbox" class="checklist-checkbox" data-item="teclado">
                                    <span class="checklist-text">TECLADO</span>
                                </label>
                                <label class="checklist-item">
                                    <input type="checkbox" class="checklist-checkbox" data-item="mouse">
                                    <span class="checklist-text">MOUSE</span>
                                </label>
                                <label class="checklist-item">
                                    <input type="checkbox" class="checklist-checkbox" data-item="adaptador-hdmi">
                                    <span class="checklist-text">ADAPTADOR HDMI/VGA</span>
                                </label>
                                <label class="checklist-item">
                                    <input type="checkbox" class="checklist-checkbox" data-item="monitor">
                                    <span class="checklist-text">MONITOR + CHICOTE</span>
                                </label>
                                <label class="checklist-item">
                                    <input type="checkbox" class="checklist-checkbox" data-item="cabo-vga">
                                    <span class="checklist-text">CABO VGA</span>
                                </label>
                                <label class="checklist-item">
                                    <input type="checkbox" class="checklist-checkbox" data-item="switch">
                                    <span class="checklist-text">SWITCH + CABO FOR√áA</span>
                                </label>
                                <label class="checklist-item">
                                    <input type="checkbox" class="checklist-checkbox" data-item="starlink">
                                    <span class="checklist-text">STARLINK <small>(Conferir acess√≥rios)</small></span>
                                </label>
                                <label class="checklist-item">
                                    <input type="checkbox" class="checklist-checkbox" data-item="impressora">
                                    <span class="checklist-text">IMPRESSORA + PAPEL</span>
                                </label>
                                <label class="checklist-item">
                                    <input type="checkbox" class="checklist-checkbox" data-item="transformador">
                                    <span class="checklist-text">TRANSFORMADOR</span>
                                </label>
                                <label class="checklist-item">
                                    <input type="checkbox" class="checklist-checkbox" data-item="extensao">
                                    <span class="checklist-text">EXTENS√ÉO DE ENERGIA 3</span>
                                </label>
                                <label class="checklist-item">
                                    <input type="checkbox" class="checklist-checkbox" data-item="totem">
                                    <span class="checklist-text">TOTEM + PAPEL + CABO DE FOR√áA</span>
                                </label>
                                <label class="checklist-item">
                                    <input type="checkbox" class="checklist-checkbox" data-item="cabo-rede">
                                    <span class="checklist-text">CABO DE REDE 5 <small>(4 Curtos e 1 Longo)</small></span>
                                </label>
                                <label class="checklist-item">
                                    <input type="checkbox" class="checklist-checkbox" data-item="adaptador-tomada">
                                    <span class="checklist-text">ADAPTADOR DE TOMADA</span>
                                </label>
                                <label class="checklist-item">
                                    <input type="checkbox" class="checklist-checkbox" data-item="tv">
                                    <span class="checklist-text">TV + CHICOTE + CONTROLE</span>
                                </label>
                                <label class="checklist-item">
                                    <input type="checkbox" class="checklist-checkbox" data-item="suporte">
                                    <span class="checklist-text">SUPORTE</span>
                                </label>
                            </div>
                            <div class="checklist-footer">
                                <div class="checklist-progress">
                                    <span id="checklist-count">0</span> de <span id="checklist-total">17</span> itens verificados
                                </div>
                                <div class="checklist-progress-bar">
                                    <div class="checklist-progress-fill" id="checklist-progress-fill"></div>
                                </div>
                            </div>
                        </div>

                        <!-- Se√ß√£o Evento Goi√°s Social -->
                        <div class="checklist-card" style="margin-top: 24px;">
                            <div class="checklist-header">
                                <h3>üé™ Evento Goi√°s Social - Passo a Passo</h3>
                                <button class="btn-checklist-reset" onclick="resetChecklistEvento()" title="Limpar todos os itens">
                                    <span>üîÑ</span> Resetar
                                </button>
                            </div>
                            <div class="checklist-items">
                                <label class="checklist-item">
                                    <input type="checkbox" class="checklist-checkbox-evento" data-item="evt-01">
                                    <span class="checklist-text"><strong>01</strong> ‚Äì Montar e ligar Starlink</span>
                                </label>
                                <label class="checklist-item">
                                    <input type="checkbox" class="checklist-checkbox-evento" data-item="evt-02">
                                    <span class="checklist-text"><strong>02</strong> ‚Äì Aguardar atualiza√ß√£o e conex√£o com sat√©lite</span>
                                </label>
                                <label class="checklist-item">
                                    <input type="checkbox" class="checklist-checkbox-evento" data-item="evt-03">
                                    <span class="checklist-text"><strong>03</strong> ‚Äì Conectar todos os dispositivos no mesmo Switch</span>
                                </label>
                                <label class="checklist-item">
                                    <input type="checkbox" class="checklist-checkbox-evento" data-item="evt-04">
                                    <span class="checklist-text"><strong>04</strong> ‚Äì Dispositivos: Servidor, Totem, TV/Mini PC</span>
                                </label>
                                <label class="checklist-item">
                                    <input type="checkbox" class="checklist-checkbox-evento" data-item="evt-05">
                                    <span class="checklist-text"><strong>05</strong> ‚Äì Aguardar todos receberem IP</span>
                                </label>
                                <label class="checklist-item">
                                    <input type="checkbox" class="checklist-checkbox-evento" data-item="evt-06">
                                    <span class="checklist-text"><strong>06</strong> ‚Äì Ligar Servidor (Mini PC)</span>
                                </label>
                                <label class="checklist-item">
                                    <input type="checkbox" class="checklist-checkbox-evento" data-item="evt-07">
                                    <span class="checklist-text"><strong>07</strong> ‚Äì Verificar se est√° em Cabo ou Wi-Fi</span>
                                </label>
                                <label class="checklist-item">
                                    <input type="checkbox" class="checklist-checkbox-evento" data-item="evt-08">
                                    <span class="checklist-text"><strong>08</strong> ‚Äì Conferir configura√ß√£o de rede no VirtualBox</span>
                                </label>
                                <label class="checklist-item">
                                    <input type="checkbox" class="checklist-checkbox-evento" data-item="evt-09">
                                    <span class="checklist-text"><strong>09</strong> ‚Äì Iniciar m√°quina virtual</span>
                                </label>
                                <label class="checklist-item">
                                    <input type="checkbox" class="checklist-checkbox-evento" data-item="evt-10">
                                    <span class="checklist-text"><strong>10</strong> ‚Äì Selecionar op√ß√£o 1 no menu da VM</span>
                                </label>
                                <label class="checklist-item">
                                    <input type="checkbox" class="checklist-checkbox-evento" data-item="evt-11">
                                    <span class="checklist-text"><strong>11</strong> ‚Äì Selecionar op√ß√£o 2 no sistema virtualizado</span>
                                </label>
                                <label class="checklist-item">
                                    <input type="checkbox" class="checklist-checkbox-evento" data-item="evt-12">
                                    <span class="checklist-text"><strong>12</strong> ‚Äì Verificar IP gerado no servidor</span>
                                </label>
                                <label class="checklist-item">
                                    <input type="checkbox" class="checklist-checkbox-evento" data-item="evt-13">
                                    <span class="checklist-text"><strong>13</strong> ‚Äì Setar este IP para todas as URLs de servi√ßo do Totem</span>
                                </label>
                                <label class="checklist-item">
                                    <input type="checkbox" class="checklist-checkbox-evento" data-item="evt-14">
                                    <span class="checklist-text"><strong>14</strong> ‚Äì Ligar Totem de senhas</span>
                                </label>
                                <label class="checklist-item">
                                    <input type="checkbox" class="checklist-checkbox-evento" data-item="evt-15">
                                    <span class="checklist-text"><strong>15</strong> ‚Äì Iniciar impressora t√©rmica</span>
                                </label>
                                <label class="checklist-item">
                                    <input type="checkbox" class="checklist-checkbox-evento" data-item="evt-16">
                                    <span class="checklist-text"><strong>16</strong> ‚Äì Verificar IP local <small>(apenas confer√™ncia)</small></span>
                                </label>
                                <label class="checklist-item">
                                    <input type="checkbox" class="checklist-checkbox-evento" data-item="evt-17">
                                    <span class="checklist-text"><strong>17</strong> ‚Äì Ligar Smart TV ou Mini PC</span>
                                </label>
                                <label class="checklist-item">
                                    <input type="checkbox" class="checklist-checkbox-evento" data-item="evt-18">
                                    <span class="checklist-text"><strong>18</strong> ‚Äì Acessar navegador/aplica√ß√£o</span>
                                </label>
                                <label class="checklist-item">
                                    <input type="checkbox" class="checklist-checkbox-evento" data-item="evt-19">
                                    <span class="checklist-text"><strong>19</strong> ‚Äì Informar o IP do servidor (VM)</span>
                                </label>
                                <label class="checklist-item">
                                    <input type="checkbox" class="checklist-checkbox-evento" data-item="evt-20">
                                    <span class="checklist-text"><strong>20</strong> ‚Äì Verificar exibi√ß√£o de senhas</span>
                                </label>
                                <label class="checklist-item">
                                    <input type="checkbox" class="checklist-checkbox-evento" data-item="evt-21">
                                    <span class="checklist-text"><strong>21</strong> ‚Äì Configurar usu√°rio de atendimento</span>
                                </label>
                                <label class="checklist-item">
                                    <input type="checkbox" class="checklist-checkbox-evento" data-item="evt-22">
                                    <span class="checklist-text"><strong>22</strong> ‚Äì Sistema conectado ao IP do servidor</span>
                                </label>
                                <label class="checklist-item">
                                    <input type="checkbox" class="checklist-checkbox-evento" data-item="evt-23">
                                    <span class="checklist-text"><strong>23</strong> ‚Äì Testar chamada de senha</span>
                                </label>
                                <label class="checklist-item">
                                    <input type="checkbox" class="checklist-checkbox-evento" data-item="evt-24">
                                    <span class="checklist-text"><strong>24</strong> ‚Äì Teste final <small>(Totem gera senha, Impressora imprime, Atendimento chama, TV exibe)</small></span>
                                </label>
                            </div>
                            <div class="checklist-footer">
                                <div class="checklist-progress">
                                    <span id="checklist-count-evento">0</span> de <span id="checklist-total-evento">24</span> passos conclu√≠dos
                                </div>
                                <div class="checklist-progress-bar">
                                    <div class="checklist-progress-fill" id="checklist-progress-fill-evento"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Escala de Folgas Tab -->
                <div id="folgas" class="tab-content">
                    <div class="page-header">
                        <h2>üìÖ Escala de Folgas</h2>
                        <p>Calend√°rio inteligente para gerenciamento de folgas dos colaboradores</p>
                    </div>
                    
                    <div class="crud-toolbar">
                        <button class="crud-btn btn-add" onclick="abrirModalFolga()">
                            <span>‚ûï</span> Nova Folga
                        </button>
                        <button class="crud-btn btn-refresh" onclick="recarregarFolgas()" style="background: var(--info);">
                            <span>üîÑ</span> Atualizar
                        </button>
                    </div>

                    <div class="folgas-container">
                        <!-- Controles do Calend√°rio -->
                        <div class="calendario-controles">
                            <button class="btn-calendario" onclick="mesAnterior()">
                                <span>‚óÄ</span>
                            </button>
                            <h3 id="calendario-mes-ano">Fevereiro 2026</h3>
                            <button class="btn-calendario" onclick="proximoMes()">
                                <span>‚ñ∂</span>
                            </button>
                            <button class="btn-calendario btn-hoje" onclick="irParaHoje()">
                                <span>üìç</span> Hoje
                            </button>
                        </div>

                        <!-- Legenda -->
                        <div class="calendario-legenda">
                            <div class="legenda-item">
                                <span class="legenda-cor folga-aprovada"></span>
                                <span>Folga Aprovada</span>
                            </div>
                            <div class="legenda-item">
                                <span class="legenda-cor folga-pendente"></span>
                                <span>Pendente</span>
                            </div>
                            <div class="legenda-item">
                                <span class="legenda-cor folga-recusada"></span>
                                <span>Recusada</span>
                            </div>
                        </div>

                        <!-- Calend√°rio -->
                        <div class="calendario-wrapper">
                            <div class="calendario-header">
                                <div class="calendario-dia-semana">Dom</div>
                                <div class="calendario-dia-semana">Seg</div>
                                <div class="calendario-dia-semana">Ter</div>
                                <div class="calendario-dia-semana">Qua</div>
                                <div class="calendario-dia-semana">Qui</div>
                                <div class="calendario-dia-semana">Sex</div>
                                <div class="calendario-dia-semana">S√°b</div>
                            </div>
                            <div class="calendario-grid" id="calendario-grid">
                                <!-- Dias ser√£o gerados via JavaScript -->
                            </div>
                        </div>

                        <!-- Lista de Folgas do M√™s -->
                        <div class="folgas-lista-container">
                            <h3>üìã Folgas do M√™s</h3>
                            <div id="folgas-lista" class="folgas-lista">
                                <!-- Lista ser√° populada via JavaScript -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Modal de Folga -->
    <div id="modalFolga" class="modal">
        <div class="modal-content modal-folga">
            <div class="modal-header">
                <h3 id="modalFolgaTitulo">‚ûï Nova Folga</h3>
                <button class="modal-close" onclick="fecharModalFolga()">&times;</button>
            </div>
            <form id="formFolga" onsubmit="salvarFolga(event)">
                <input type="hidden" id="folgaId">
                <div class="form-group">
                    <label for="folgaColaborador">üë§ Colaborador</label>
                    <select id="folgaColaborador" required>
                        <option value="">Selecione o colaborador...</option>
                        <option value="fabricio_lima">Fabricio Lima Cabral</option>
                        <option value="fabricio_alves">Fabricio Alves de Oliveira</option>
                        <option value="roberto_sergio">Roberto Sergio Jaldin Beckmann</option>
                        <option value="roberto_rondinei">Roberto Rondinei Silva de Lima</option>
                    </select>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="folgaDataInicio">üìÖ Data In√≠cio</label>
                        <input type="date" id="folgaDataInicio" required>
                    </div>
                    <div class="form-group">
                        <label for="folgaDataFim">üìÖ Data Fim</label>
                        <input type="date" id="folgaDataFim" required>
                    </div>
                </div>
                <div class="form-group">
                    <label for="folgaTipo">üìå Tipo de Folga</label>
                    <select id="folgaTipo" required>
                        <option value="">Selecione o tipo...</option>
                        <option value="folga">Folga</option>
                        <option value="ferias">F√©rias</option>
                        <option value="licenca">Licen√ßa</option>
                        <option value="compensacao">Compensa√ß√£o</option>
                        <option value="abono">Abono</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="folgaStatus">üìä Status</label>
                    <select id="folgaStatus" required>
                        <option value="pendente">Pendente</option>
                        <option value="aprovada">Aprovada</option>
                        <option value="recusada">Recusada</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="folgaObservacao">üìù Observa√ß√£o</label>
                    <textarea id="folgaObservacao" rows="3" placeholder="Observa√ß√µes adicionais..."></textarea>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn-cancelar" onclick="fecharModalFolga()">Cancelar</button>
                    <button type="submit" class="btn-salvar">üíæ Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal de Detalhes -->
    <div id="detailModal" class="modal">
        <div class="modal-content">
            <button class="modal-close">&times;</button>
            <div id="modalBody"></div>
        </div>
    </div>

    <!-- Rodap√© -->
    <footer class="app-footer">
        <div class="footer-content">
            <span class="footer-text">Desenvolvido por <strong>Fabricio Oliveira</strong></span>
            <span class="footer-separator">‚Ä¢</span>
            <span class="footer-year">¬© 2026</span>
        </div>
    </footer>

    <!-- Scripts -->
    <!-- N√ÉO MAIS NECESS√ÅRIO: data.js foi substitu√≠do por APIs PHP -->
    <!-- <script src="data.js"></script> -->
    <script src="admin.js"></script>
    <script src="admin-integration.js"></script>
    <script src="script.js"></script>
    <script>
    // ========== FUN√á√ÉO DE LOGOUT ==========
    
    function logout() {
        localStorage.removeItem('sgdti_user');
        window.location.href = 'login.html';
    }

    // Redirecionamento dos cart√µes do dashboard para as abas
    document.addEventListener('DOMContentLoaded', function() {
        var cardTi = document.getElementById('card-ti');
        var cardCotecs = document.getElementById('card-cotecs');
        var cardImpressoras = document.getElementById('card-impressoras');
        var cardInternet = document.getElementById('card-internet');
        var cardEquipamentos = document.getElementById('card-equipamentos');
        if(cardTi) cardTi.addEventListener('click', function() { window.switchTab ? switchTab('ti') : document.querySelector('[data-tab="ti"]').click(); });
        if(cardCotecs) cardCotecs.addEventListener('click', function() { window.switchTab ? switchTab('dashboard') : document.querySelector('[data-tab="dashboard"]').click(); });
        if(cardImpressoras) cardImpressoras.addEventListener('click', function() { window.switchTab ? switchTab('impressoras') : document.querySelector('[data-tab="impressoras"]').click(); });
        if(cardInternet) cardInternet.addEventListener('click', function() { window.switchTab ? switchTab('internet') : document.querySelector('[data-tab="internet"]').click(); });
        if(cardEquipamentos) cardEquipamentos.addEventListener('click', function() { window.switchTab ? switchTab('equipamentos') : document.querySelector('[data-tab="equipamentos"]').click(); });
        var cardEmails = document.getElementById('card-emails');
        if(cardEmails) cardEmails.addEventListener('click', function() { window.switchTab ? switchTab('emails') : document.querySelector('[data-tab="emails"]').click(); });
        var cardVigencias = document.getElementById('card-vigencias');
        if(cardVigencias) cardVigencias.addEventListener('click', function() { window.switchTab ? switchTab('vigencias') : document.querySelector('[data-tab="vigencias"]').click(); });
        var cardViagens = document.getElementById('card-viagens');
        if(cardViagens) cardViagens.addEventListener('click', function() { window.switchTab ? switchTab('viagens') : document.querySelector('[data-tab="viagens"]').click(); });
        
        // ========== CHECKLIST FUNCTIONS ==========
        initChecklist();
    });
    
    // Inicializa o checklist
    function initChecklist() {
        const checkboxes = document.querySelectorAll('.checklist-checkbox');
        const savedState = JSON.parse(localStorage.getItem('sgdti_checklist') || '{}');
        
        checkboxes.forEach(function(checkbox) {
            const item = checkbox.getAttribute('data-item');
            
            // Restaurar estado salvo
            if (savedState[item]) {
                checkbox.checked = true;
                checkbox.closest('.checklist-item').classList.add('checked');
            }
            
            // Evento de mudan√ßa
            checkbox.addEventListener('change', function() {
                const parent = this.closest('.checklist-item');
                if (this.checked) {
                    parent.classList.add('checked');
                } else {
                    parent.classList.remove('checked');
                }
                saveChecklistState();
                updateChecklistProgress();
            });
        });
        
        updateChecklistProgress();
    }
    
    // Salva o estado do checklist no localStorage
    function saveChecklistState() {
        const checkboxes = document.querySelectorAll('.checklist-checkbox');
        const state = {};
        
        checkboxes.forEach(function(checkbox) {
            const item = checkbox.getAttribute('data-item');
            state[item] = checkbox.checked;
        });
        
        localStorage.setItem('sgdti_checklist', JSON.stringify(state));
    }
    
    // Atualiza a barra de progresso
    function updateChecklistProgress() {
        const checkboxes = document.querySelectorAll('.checklist-checkbox');
        const total = checkboxes.length;
        let checked = 0;
        
        checkboxes.forEach(function(checkbox) {
            if (checkbox.checked) checked++;
        });
        
        const countEl = document.getElementById('checklist-count');
        const totalEl = document.getElementById('checklist-total');
        const progressFill = document.getElementById('checklist-progress-fill');
        
        if (countEl) countEl.textContent = checked;
        if (totalEl) totalEl.textContent = total;
        if (progressFill) {
            const percentage = total > 0 ? (checked / total) * 100 : 0;
            progressFill.style.width = percentage + '%';
        }
    }
    
    // Reseta o checklist
    function resetChecklist() {
        const checkboxes = document.querySelectorAll('.checklist-checkbox');
        
        checkboxes.forEach(function(checkbox) {
            checkbox.checked = false;
            checkbox.closest('.checklist-item').classList.remove('checked');
        });
        
        localStorage.removeItem('sgdti_checklist');
        updateChecklistProgress();
    }
    
    // ========== CHECKLIST EVENTO GOI√ÅS SOCIAL ==========
    
    // Inicializa o checklist do evento (chamado dentro de initChecklist)
    (function initChecklistEvento() {
        const checkboxes = document.querySelectorAll('.checklist-checkbox-evento');
        const savedState = JSON.parse(localStorage.getItem('sgdti_checklist_evento') || '{}');
        
        checkboxes.forEach(function(checkbox) {
            const item = checkbox.getAttribute('data-item');
            
            // Restaurar estado salvo
            if (savedState[item]) {
                checkbox.checked = true;
                checkbox.closest('.checklist-item').classList.add('checked');
            }
            
            // Evento de mudan√ßa
            checkbox.addEventListener('change', function() {
                const parent = this.closest('.checklist-item');
                if (this.checked) {
                    parent.classList.add('checked');
                } else {
                    parent.classList.remove('checked');
                }
                saveChecklistStateEvento();
                updateChecklistProgressEvento();
            });
        });
        
        updateChecklistProgressEvento();
    })();
    
    // Salva o estado do checklist do evento
    function saveChecklistStateEvento() {
        const checkboxes = document.querySelectorAll('.checklist-checkbox-evento');
        const state = {};
        
        checkboxes.forEach(function(checkbox) {
            const item = checkbox.getAttribute('data-item');
            state[item] = checkbox.checked;
        });
        
        localStorage.setItem('sgdti_checklist_evento', JSON.stringify(state));
    }
    
    // Atualiza a barra de progresso do evento
    function updateChecklistProgressEvento() {
        const checkboxes = document.querySelectorAll('.checklist-checkbox-evento');
        const total = checkboxes.length;
        let checked = 0;
        
        checkboxes.forEach(function(checkbox) {
            if (checkbox.checked) checked++;
        });
        
        const countEl = document.getElementById('checklist-count-evento');
        const totalEl = document.getElementById('checklist-total-evento');
        const progressFill = document.getElementById('checklist-progress-fill-evento');
        
        if (countEl) countEl.textContent = checked;
        if (totalEl) totalEl.textContent = total;
        if (progressFill) {
            const percentage = total > 0 ? (checked / total) * 100 : 0;
            progressFill.style.width = percentage + '%';
        }
    }
    
    // Reseta o checklist do evento
    function resetChecklistEvento() {
        const checkboxes = document.querySelectorAll('.checklist-checkbox-evento');
        
        checkboxes.forEach(function(checkbox) {
            checkbox.checked = false;
            checkbox.closest('.checklist-item').classList.remove('checked');
        });
        
        localStorage.removeItem('sgdti_checklist_evento');
        updateChecklistProgressEvento();
    }
    </script>
</body>
</html>